<!DOCTYPE html>
<html>
<head>
	<title>Belajar Form Validation</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
</head>
<style type="text/css">
	.form-group{
		margin-bottom: 15px;
		padding-left: 25px;
	}

	form{
		border: 1px solid black;
		margin: 30px auto;
		width: 450px;
		border-radius: 20px;
	}

	label{
		font-weight: bold;
	}

	button{
		margin-left: 25px;
		margin-bottom: 20px;
	}

	.form-control, .form-select{
		width: 400px;
	}
</style>
<body>
	<div class="container">
		<form name="formPendaftaran" method="post" onsubmit="validForm()">
			<div class="mt-5 form-group">
				<label>Nama</label>
				<input type="txt" name="nama" placeholder="Nama lengkap" class="form-control">
			</div>
			<div class="form-group">
				<label>Email</label>
				<input type="email" name="email" placeholder="Email Aktif" class="form-control">
				<small id="emailHelp" class="form-text text-muted">Email akun digunakan untuk mengirimkan notifikasi.</small>
			</div>
			<div class="form-group">
				<label>Jurusan</label>
				<select name="jurusan" class="form-select">
					<option value="0">pilih jurusan</option>
					<option value="1">Informatika</option>
					<option value="2">Sistem Informasi</option>
					<option value="3">Komputerisasi Akuntansi</option>
					<option value="4">Teknik Komputer</option>
				</select>
			</div>
			<div class="form-group">
				<label>Nomor Telpon</label>
				<input type="txt" name="nomor" placeholder="Nomor Telpon" class="form-control validNo" autocomplete="off" oninput="noIndo()">
			</div>
			<div class="form-group">
				<label>Password</label>
				<input type="password" name="password" placeholder="Password" class="form-control">
			</div>
			<div class="form-group">
				<label>Konfirmasi Password</label>
				<input type="password" name="Kpassword" placeholder="Konfirmasi Password" class="form-control">
			</div>
			<button type="submit" class="mt-3 btn btn-primary">Submit</button>
		</form>
	</div>
	<script type="text/javascript">
		function noIndo(){
			let no = document.querySelector('.validNo');
			let angka = no.value.replace(/[^+\d]/g, ""); 
			let plus;
			if (no.value.match(/^(\+62|62|0)/g)) {
				let nol = angka.replace(/^(\+62(0|\+|(\+\n)$)|62(0|\+))/g,"+62");
				noHp = nol.replace(/(\+.?)$/g,"");
				no.value = noHp;
			}else{
				plus = angka.replace(/^(\+6)/,"");
				no.value = "+62" + plus;
			}
		}
		function validForm(){
			let no = document.forms["formPendaftaran"]["nomor"].value;
			console.log(no);
			if (document.forms["formPendaftaran"]["nama"].value == "") {
				alert("Nama tidak boleh kosong");
				document.forms["formPendaftaran"]["nama"].focus();
				return false;
			}
			if (document.forms["formPendaftaran"]["email"].value == "") {
				alert("Email tidak boleh kosong");
				document.forms["formPendaftaran"]["email"].focus();
				return false;
			}
			if (document.forms["formPendaftaran"]["jurusan"].selectedIndex < 1) {
				alert("Jurusan tidak boleh kosong");
				document.forms["formPendaftaran"]["jurusan"].focus();
				return false;
			}

			if (document.forms["formPendaftaran"]["nomor"].value == "") {
				alert("nomor hp tidak boleh kosong");
				document.forms["formPendaftaran"]["nomor"].focus();
				return false;
			}else if(no.match(/([^+\d])/g)){
				alert("nomor hp salah!");
				document.forms["formPendaftaran"]["nomor"].focus();
				return false;
			}else if(no.length < 9){
				if (no.length > 15) {
					alert("nomor hp terlalu panjang!");
				}else{
					alert("nomor hp terlalu pendek!");
				}
				document.forms["formPendaftaran"]["nomor"].focus();
				return false;
			}

			if (document.forms["formPendaftaran"]["password"].value == "") {
				alert("Nama tidak boleh kosong");
				document.forms["formPendaftaran"]["password"].focus();
				return false;
			}if (document.forms["formPendaftaran"]["Kpassword"].value == "") {
				alert("Nama tidak boleh kosong");
				document.forms["formPendaftaran"]["Kpassword"].focus();
				return false;
			}else if (document.forms["formPendaftaran"]["password"].value != document.forms["formPendaftaran"]["Kpassword"].value) {
				alert("Konfirmasi Password tidak sama dengan Password");
				document.forms["formPendaftaran"]["Kpassword"].focus();
				return false;
			}

		}
	</script>
</body>
</html>